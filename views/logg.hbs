<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VARtchat</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">
    <link rel="icon" href="https://drive.google.com/uc?export=download&id=1edu1ZtUJD3NkeUCUa-jsEt1igkqM9HYz"
        type="image/gif" sizes="16x16">





    <style>
        html {
            font-size: 62.5%;
        }

        body {
            background-color: rgb(250, 250, 250);
            margin: 0%;
            padding: 0%;
        }

        .head {
            width: 100%;
            height: 6rem;
            background-color: rgb(0, 0, 0);
            position: absolute;
            z-index: 2;
        }

        .heading {
            margin-left: 5rem;
            color: white;
            margin-top: 1rem;
            font-size: 3.5rem;
        }

        .main_div {
            display: flex;
            flex-direction: column;
            align-items: center;

        }

        .main_div1 {
            height: auto;
            width: 80rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 8rem;
            transition: margin-top 0.5s;
        }

        .main_div2 {
            height: 60rem;
            width: 80rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: rgb(250, 250, 250);
        }

        ::-webkit-scrollbar {
            display: none;
        }


        .inp {
            margin-left: 5rem;
        }

        .text_area {
            height: auto;
            background-color: rgb(250, 250, 250);
            border: none;
            border-bottom: 0.1rem solid rgb(27, 131, 251);
            color: rgb(0, 0, 0);
            margin-top: 2rem;
            overflow: hidden;
            resize: none;
            font-family: Arial;
            font-size: 1.5rem;
            font-weight: bold;
            width: 52rem;

        }

        .text_area:focus {
            outline: none;
        }

        .send_but {
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            background-color: #4CAF50;
            color: rgb(43, 43, 43);
            border-radius: none;
            margin-left: 2rem;
            border: 0.1rem solid #4CAF50;
            transition: all 0.5s;

        }

        .send_but:hover {
            background-color: #7ab67c;
        }

        .text_part {
            width: auto;
            max-width: 70rem;
            height: auto;
            border-color: rgb(232, 232, 232);
            font-size: 150%;
            margin-top: 0.5rem;
            border-radius: 1rem;
            background-color: #e4e6eb;

        }

        .author_name {
            margin-top: 0.2rem;
            margin-left: 1rem;
            font-family: 'Roboto', sans-serif;
            color: rgb(61, 61, 61);
            font-size: 1.5rem;
        }

        .content_1 {
            margin: 0.5rem 1rem 0.5rem 1rem;
            color: rgb(90, 90, 90);
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            white-space: pre-wrap;
            /* Since CSS 2.1 */
            white-space: -moz-pre-wrap;
            /* Mozilla, since 1999 */
            white-space: -pre-wrap;
            /* Opera 4-6 */
            white-space: -o-pre-wrap;
            word-wrap: break-word;
        }

        .new_div_op {
            height: auto;
            width: 70rem;
            display: flex;
            flex-direction: column;
            align-items: baseline;
        }

        .hide_op {
            height: 100%;
            width: 100%;
            position: absolute;
            background-color: rgb(250, 250, 250);
            z-index: 1;
        }

        .get_data1 {
            position: absolute;
            margin-top: 6rem;
            height: 5rem;
            width: 100%;

        }

        .opop122k {
            height: 4rem;
            width: 4rem;
            margin-left: 2rem;
            margin-top: 1rem;
            font-size: 2rem;
            border-radius: 50%;
            background-color: #4CAF50;
            transition: all 0.5s;
            text-align: center;
        }

        .opop122k:hover {
            background-color: #7ab67c;
        }

        .fa-users {
            margin-top: 0.9rem;
            color: rgb(44, 43, 43);
        }

        .user_list_op {
            height: 0;
            width: 100%;
            background-color: rgb(39 39 39);
            transition: 0.5s;
            color: red;
            display: flex;
            justify-content: center;
            font-size: 150%;
            flex-wrap: wrap;

        }

        .user10_list {
            width: 30rem;
            height: 20.75rem;
            overflow-y: scroll;
            display: none;
            color: rgb(255, 255, 255);
            font-family: "Archivo Black", sans-serif;
            transition: opacity 0.2s;
            opacity: 0;
        }

        .user_profile {
            height: 25rem;
            width: 30rem;
            /* background-color: rgb(39 39 39);*/
            display: none;
            transition: opacity 0.2s;
            opacity: 0;
        }

        .bb10 {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            height: 8rem;
            width: 8rem;
            font-size: 5.5rem;
            text-align: center;
            color: rgb(251 218 64);
            border-radius: 50%;
            font-family: "Archivo Black", sans-serif;
            background-color: rgb(39 39 39);
        }

        #user_logo_1 {
            height: inherit;
            width: inherit;
            margin: 0;
            object-fit: cover;
            border-radius: 50%;
        }

        h4 {
            margin: 0.5rem 0 0.5rem 0;
            color: white;
        }

        .leave_room11 {
            font-size: 130%;
            height: 2.5rem;
            width: 15rem;
            border-radius: 1rem;
            background-color: #4CAF50;
            color: white;
            transition: background-color 0.5s;
            margin-top: 1.7rem;
            text-align: center;
            padding: 0.5rem 0 0.5rem 0;
        }

        .div_10_op {
            width: auto;
            height: 3rem;
            font-size: 1.5rem;
            padding: 0.2rem 0.2rem 0.2rem 0.2rem;
            background-color: #e4e6eb;
            color: rgb(1 150 255);
            border-radius: 0.5rem;
            border-top-left-radius: 2rem;
            border-bottom-left-radius: 2rem;
            display: flex;
            align-items: center;
            margin-top: 0.75rem;
        }

        .image_pp_10 {
            height: 3rem;
            width: 3rem;
            border-radius: 50%;
        }

        .div_10_op h3 {
            margin: 0;
        }

        .imma_op_10 {
            height: inherit;
            width: inherit;
            object-fit: cover;
            border-radius: 50%;
        }

        .leave_room11:hover {
            background-color: #7ab67c;
        }

        @media only screen and (max-width: 800px) {

            .main_div1 {
                width: 60rem;
                margin-top: 8rem;
            }

            .main_div2 {
                width: 60rem;
            }

            .text_part {
                max-width: 52rem;
            }

            .new_div_op {
                width: 52rem;
            }

            .text_area {
                width: 30rem;
            }

            .inp {
                margin: 0%;
            }
        }

        @media only screen and (max-width: 600px) {
            .main_div1 {
                width: 40rem;
                margin-top: 12rem;
            }

            .main_div2 {
                width: 40rem;
            }

            .text_part {
                max-width: 38rem;
            }

            .new_div_op {
                width: 38rem;
            }

            .text_area {
                width: 25rem;
            }

            .send_but {
                margin-left: 0.5rem;
            }

            .div_10_op {
                margin-left: 0%;
            }

            .user10_list {
                margin-bottom: 5rem;
            }
        }

        @media only screen and (max-width: 450px) {
            .main_div1 {
                width: 35rem;
                margin-top: 12rem;
            }

            .main_div2 {
                width: 35rem;
                height: 45rem;
            }

            .text_part {
                max-width: 32rem;
            }

            .new_div_op {
                width: 32rem;
            }

            .text_area {
                width: 18rem;
            }


        }

        .bb1 {
            position: absolute;
            z-index: 1;
            height: 18rem;
            width: 25.2rem;
            display: none;
        }

        .others_profile_10 {
            position: absolute;
            z-index: 1;
            height: 7.6rem;
            width: 10.64rem;
            margin-top: 0.8rem;
            display: none;

        }
    </style>

</head>

<body>
    <div class="head">
        <h1 id="10pp" class="heading"><span style="color: red;">VAR</span>tworld</h1>
    </div>

    <div class="get_data1">
        <div class="user_list_op">
            <div class="user_profile">
                <div onmouseout="hide_profile_pic()" class="bb1">
                    <img src="" style="height:inherit;width:inherit;" id="user_logo_5">
                </div>
                <div onmouseover="display_on_large()" class="bb10">
                    <img src="" id="user_logo_1">
                </div>
                <div style="font-family:Archivo Black, sans-serif;">
                    <h1 id="user_name_id" style="margin: 1rem 0 1rem 0;color:rgb(105 173 253)">Vedupaji</h1>
                    <h4 id="user_room_name">Room:-Ved</h4>
                    <h4 id="user_id_1">Id:-56regierferverbr</h4>
                    <div class="leave_room11">
                        <h1 onclick="leave_room_op()" style="margin:0;font-size: 2rem;">Leave Room</h1>
                    </div>
                </div>
            </div>
            <div class="user10_list">

                <div class="_no_use"></div>
            </div>
        </div>
        <div onclick="get_list1010v()" class="opop122k"><i class="fa fa-users" aria-hidden="true"></i></div>
    </div>



    <div class="hide_op"></div>

    <div class="main_div">
        <div class="main_div1">
            <div class="main_div2">
                <div class="new_div_op">
                    <div class="appa1"></div>
                </div>
            </div>
            <div class="inp">
                <textarea class="text_area" name="" id=""></textarea>
                <button onclick="send_pp()" class="send_but"><i class="fa fa-send-o"
                        style="font-size:24px;color:rgb(0, 0, 0);"></i></button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>

    <script>
        const leave_room_op = () => {
            window.location.href = '/';
        }
    </script>
    <script>
        let src_k = JSON.parse(sessionStorage.getItem("user_name1"));
         let hide_remove_k = document.getElementsByClassName("bb1")[0];
        if (src_k != null) {
           
            hide_remove_k.children[0].setAttribute('src', src_k.profile_pic);
        }
        const display_on_large = () => {
            hide_remove_k.style.display = "block";
        }

        const hide_profile_pic = () => {
            hide_remove_k.style.display = "none";
        }
    </script>

    <script>
        let hh = document.getElementsByClassName("user_list_op")[0];
        let hh2 = document.getElementsByClassName("get_data1")[0];
        let hh3 = document.getElementsByClassName("user10_list")[0];
        let hh1 = document.getElementsByClassName("main_div1")[0];
        window.addEventListener('resize', () => {
            if (hh3.style.display == "block") {
                let client_op_width = document.getElementsByTagName("body")[0].clientWidth;
                if (client_op_width <= 600) {
                    hh.style.height = "50rem";
                    hh2.style.height = "55rem";
                    hh1.style.marginTop = "62rem";
                }
                else {
                    hh.style.height = "25rem";
                    hh2.style.height = "30rem";
                    hh1.style.marginTop = "32rem";
                }
            }
        })

        const get_list1010v = () => {
            let src_k = JSON.parse(sessionStorage.getItem("user_name1"));
            if (src_k != null) {
                let client_op_width = document.getElementsByTagName("body")[0].clientWidth;
                let hh4 = document.getElementsByClassName("user_profile")[0];
                let height_1_op = "25rem";
                let height_2_op = "30rem";
                let margin_ooo1p = "32rem";
                if (client_op_width <= 600) {
                    height_1_op = "50rem";
                    height_2_op = "55rem";
                    margin_ooo1p = "62rem";
                }
                if (hh.clientHeight == "0") {
                    hh.style.height = height_1_op;
                    hh1.style.marginTop = margin_ooo1p;
                    hh2.style.height = height_2_op;
                    hh3.style.display = "block";
                    hh4.style.display = "block";
                    setTimeout(() => {
                        hh3.style.opacity = "1";
                        hh4.style.opacity = "1";
                    }, 400)
                }
                else {
                    hh.style.height = "0";
                    if (client_op_width <= 600) {
                        hh1.style.marginTop = "12rem";
                    }
                    else {
                        hh1.style.marginTop = "8rem";
                    }
                    hh2.style.height = "5rem";
                    hh3.style.opacity = "0";
                    hh4.style.opacity = "0";
                    setTimeout(() => {
                        hh3.innerHTML = "";
                        hh3.style.display = "none";
                        hh4.style.display = "none";
                    }, 100)
                }

            }
            else
            {
                alert(`You Are Unable To Use This Feature Because You Are In Global Room`)
            }
        }
    </script>

    <script>
        let socket = io();
        let pp = JSON.parse(sessionStorage.getItem("user_name1"));
        let soo1 = socket.id;
        if (pp == null) {
            pp = {
                name: soo1,
                room: "vart"
            }
            console.log(soo1)
            alert(`You Are Now In VARt Global Room`);
        }
        console.log(pp)
        socket.emit('room_request', pp)
        socket.on('receive_data', (data) => {
            console.log(data)
            console.log(socket.id)
        })

        document.getElementsByClassName("opop122k")[0].addEventListener('click', () => {
            socket.emit('send_user_data', pp.room);
        })

        let origianl_user_data = {};
        const show_user_pic = (num_pp) => {
            let path_of_image = document.getElementsByClassName("others_profile_10")[0];
            path_of_image.children[0].setAttribute('src', origianl_user_data.profile_image[num_pp]);
            path_of_image.style.display = "block";
            let num_op_110 = (origianl_user_data.profile_image.length - 1) - (num_pp - 1)
            let get_offset_top = document.getElementsByClassName("div_10_op")[num_op_110 - 1].getBoundingClientRect();
            let get_offset_top_10 = document.getElementsByClassName("user10_list")[0].getBoundingClientRect();
            let top_space = get_offset_top_10.top;
            path_of_image.style.marginTop = ((get_offset_top.top - top_space) / 10) + "rem";
        }

        const remove_user_image = () => {
            let path_of_image = document.getElementsByClassName("others_profile_10")[0];
            path_of_image.style.display = "none";
        }

        socket.on('data_accept_op', (data_of_user) => {
            let user_logo_11 = document.getElementById("user_logo_1");
            let user_name_id1 = document.getElementById("user_name_id");
            let user_room_name1 = document.getElementById("user_room_name");
            let user_id_11 = document.getElementById("user_id_1");
            origianl_user_data = data_of_user;
            let user_name_index = data_of_user.name_of_users.indexOf(pp.name);
            user_logo_11.setAttribute('src', data_of_user.profile_image[user_name_index]);
            console.log(data_of_user.profile_image[user_name_index])
            user_name_id1.innerHTML = data_of_user.name_of_users[user_name_index];
            user_room_name1.innerHTML = pp.room;
            user_id_11.innerHTML = socket.id;

            setTimeout(() => {
                for (let i = 1; i < data_of_user.name_of_users.length; i++) {
                    if (document.getElementsByClassName("user10_list")[0].style.display != "none") {
                        document.getElementsByClassName("user10_list")[0].insertAdjacentHTML("afterbegin", `
                <div class="div_10_op">
                    <div class="image_pp_10"><img onmouseover="show_user_pic(${i})" class="imma_op_10" src="${data_of_user.profile_image[i]}"></div><h3 style="margin:0rem 0rem 0rem 1rem;">${data_of_user.name_of_users[i]}</h1>
                </div>`);
                    }
                }
                document.getElementsByClassName("user10_list")[0].insertAdjacentHTML("afterbegin", `<div class="others_profile_10">
                    <img onmouseout="remove_user_image()" src="" alt="User Image" style="height: inherit;width: inherit;">
                </div>`);
            }, 101)
        })

        let text_ar = document.getElementsByClassName("text_area")[0];
        text_ar.addEventListener('input', (event) => {
            text_ar.style.height = "auto";
            text_ar.style.height = text_ar.scrollHeight + "px";
        })

        let user_name1 = pp.name;
        document.getElementsByClassName("hide_op")[0].style.display = "none";
        let create_text1 = document.getElementsByClassName("appa1")[0];
        let elmnt = document.getElementsByClassName("main_div2")[0];
        const send_pp = () => {
            let message_data = text_ar.value;
            socket.emit('mess_op', {
                "message": message_data,
                "username": user_name1,
                "room": pp.room
            });
            text_ar.value = "";
            create_text1.insertAdjacentHTML("beforebegin",
                `<div style="background-color:#1c84ff;color:white;display:flex;align-items:center;" class="text_part">
             <pre class="content_1" style="color:rgb(250 250 250);margin-left:1rem;">${message_data}</pre>     
             </div>` );
            elmnt.scrollTop = elmnt.scrollHeight;
        }

        socket.on('get_message', (message_data) => {
            console.log(message_data)
            create_text1 = document.getElementsByClassName("appa1")[0];
            create_text1.insertAdjacentHTML("beforebegin", `<div class="text_part">                              
                        <pre class="content_1" ><span class="author_name" style="color: rgb(1 150 255);">${message_data.username}</span> ${message_data.message}</pre>
                </div>` );
            elmnt.scrollTop = elmnt.scrollHeight;
        })

        socket.on('response_op10', (data20) => {
            window.location.href = "/404sorry";
        })
    </script>
</body>


</html>